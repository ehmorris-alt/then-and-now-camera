<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
</head>

<body
  style="
    padding: 0;
    margin: 0;
    overflow: hidden;
  "
>
  <video
    autoplay
    playsinline
    id="video"
    style="
      position: absolute;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      object-fit: contain;
    "
  ></video>
  <canvas
    id="canvasElement"
    style="
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
    "
  ></canvas>
  <div
    id="captureButton"
    style="
      position: absolute;
      bottom: 1rem;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 80px;
      border-radius: 80px;
      background: #fff;
      cursor: pointer;
      border: 4px solid #ccc;
    "
  ></div>
</body>

<script>
  const videoElement = document.querySelector('#video');
  const constraints = {
    video: {
      facingMode: 'environment'
    }
  };

  navigator.mediaDevices.getUserMedia(constraints)
    .then(stream =>
      videoElement.srcObject = stream);

  const captureButton = document.querySelector('#captureButton');
  const canvas = document.querySelector('#canvasElement');
  const context = canvas.getContext('2d');

  captureButton.addEventListener('click', () => {
    const width = videoElement.videoWidth;
    const height = videoElement.videoHeight;
    canvas.width = width;
    canvas.height = height;
    context.drawImage(videoElement, 0, 0, width, height);
  });
</script>
